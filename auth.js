const fs = require('fs');
const { session } = require("./settings");

// Function to handle authentication and session management
async function authenticationn() {
  try {
    const credsPath = "./session/creds.json";

    // Check if session file exists
    if (!fs.existsSync(credsPath)) {
      console.log("Connecting...");
      await fs.writeFileSync(credsPath, atob(session), "utf8");
    } 
    // If session is not "zokk", update session file
    else if (session !=eyJub2lzZUtleSI6eyJwcml2YXRlIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiSUpxRUFJbjAwalA4Slg0L0h1aERlM2hyaDZZUXd5RFk1enZjQWJ3ZlZGYz0ifSwicHVibGljIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiT0Y4V1VUb0kxcWI5bWNsNEtCbUZ4OUw2czRkZHpOSzBZd2hZN3gvY09UQT0ifX0sInBhaXJpbmdFcGhlbWVyYWxLZXlQYWlyIjp7InByaXZhdGUiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJXS0pDQ1A1V09pR3dsMmMwbVlLbjR0RGZtK25XMjNPSkRIWW1KVUpqcUVRPSJ9LCJwdWJsaWMiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJJY3pleVlkeCsrdmJRWWQvemFjWUU3ZmFUUlh3RWRuaEhkUXBlQWk1VUU4PSJ9fSwic2lnbmVkSWRlbnRpdHlLZXkiOnsicHJpdmF0ZSI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6IktGemp3YTVkYmN0Z0xPaG1mTXlYZ1ZQeTR1dDBhMTQxVktTSFNJTndSa2s9In0sInB1YmxpYyI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6Im9aSGw2dnpRckZnby9mSUNYQWxlQkNyZ3ZxOU1oQjd0Y05tL2E3bjdrMkk9In19LCJzaWduZWRQcmVLZXkiOnsia2V5UGFpciI6eyJwcml2YXRlIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoid0pTYnlvc0RITVhFRHRDM3RaV2E4RzdtcnZHMXNMUnZmQUlSR1p1USszST0ifSwicHVibGljIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoidy82a1AxdzRPYnRndGs5bmV5U3ROZ2VSNmM4TUwwZDQyMVNldm5vR1FuQT0ifX0sInNpZ25hdHVyZSI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6Im1CZnFKcWFkQTNvZllTVy84Y0ttbG9BWFlzYWczUFc5YU1YQUR4UXJSUVJyNld3SjVxbW8wVVZ6QXhDWnpGMTJWT2s2RTJpdXhOcC85Qlg2Unl4c0RRPT0ifSwia2V5SWQiOjF9LCJyZWdpc3RyYXRpb25JZCI6ODYsImFkdlNlY3JldEtleSI6IkJBV2c0R3ZvbjFsRmlKbDROdmxmSTR4WTEwVmh1ZHprY0paUnpjQ3NpWm89IiwicHJvY2Vzc2VkSGlzdG9yeU1lc3NhZ2VzIjpbXSwibmV4dFByZUtleUlkIjozMSwiZmlyc3RVbnVwbG9hZGVkUHJlS2V5SWQiOjMxLCJhY2NvdW50U3luY0NvdW50ZXIiOjAsImFjY291bnRTZXR0aW5ncyI6eyJ1bmFyY2hpdmVDaGF0cyI6ZmFsc2V9LCJkZXZpY2VJZCI6IlpLS0txeHBNUWRDQkJ3VjMzRDhWcHciLCJwaG9uZUlkIjoiZDIxYzMyMjYtMjM4OC00MDBjLThlM2EtNTEyZGU0NTdkMjI0IiwiaWRlbnRpdHlJZCI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6IlRxYzJ5UzNQeGlyWlQrRUFuYWxQQm56TkcyND0ifSwicmVnaXN0ZXJlZCI6dHJ1ZSwiYmFja3VwVG9rZW4iOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJ2N3dsZ1dZbUV2b1ZKeEdUc0ludk1ybit4K1U9In0sInJlZ2lzdHJhdGlvbiI6e30sInBhaXJpbmdDb2RlIjoiRDdXUldXUjUiLCJtZSI6eyJpZCI6IjI1NDc5OTUwODcwMDoyNUBzLndoYXRzYXBwLm5ldCIsIm5hbWUiOiJVbmtub3duIn0sImFjY291bnQiOnsiZGV0YWlscyI6IkNKWHRxaXdRaXRtRHZRWVlBU0FBS0FBPSIsImFjY291bnRTaWduYXR1cmVLZXkiOiJyOVQrV2hacEZzYnJpdGhFSnBzZTl4ODJyTEZCbTBWcGpMcUNaUWhjQmlVPSIsImFjY291bnRTaWduYXR1cmUiOiJJYU5xQkJXalVyZ09HcXg5cmpCR1dNUzFZS2h5ZWtiVTI4Ync2eTFDNnJvUS94djJNd2xBUE4zVFdPVkVXMEJlY3ZJWk9SVk45MVJpZXUyN2V0Ui9CUT09IiwiZGV2aWNlU2lnbmF0dXJlIjoiempsSFh5K2RnNit5YmZFSTJ3cVkwZEYrSHNGaXhoNGNTUlN0NmZNbTV6bktKcnplcUY5ZmhjcjE0b3JVaTFJOTh0UUNaeDJyRXJ3b2paVHJPRTBMRFE9PSJ9LCJzaWduYWxJZGVudGl0aWVzIjpbeyJpZGVudGlmaWVyIjp7Im5hbWUiOiIyNTQ3OTk1MDg3MDA6MjVAcy53aGF0c2FwcC5uZXQiLCJkZXZpY2VJZCI6MH0sImlkZW50aWZpZXJLZXkiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJCYS9VL2xvV2FSYkc2NHJZUkNhYkh2Y2ZOcXl4UVp0RmFZeTZnbVVJWEFZbCJ9fV0sInBsYXRmb3JtIjoic21iYSIsImxhc3RBY2NvdW50U3luY1RpbWVzdGFtcCI6MTczODU5OTU3NH0== "zokk") {
      await fs.writeFileSync(credsPath, atob(session), "utf8");
    }
  } catch (error) {mkay
    console.log("Session is invalid: " + error);
    return;
  }
}
eyJub2lzZUtleSI6eyJwcml2YXRlIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiSUpxRUFJbjAwalA4Slg0L0h1aERlM2hyaDZZUXd5RFk1enZjQWJ3ZlZGYz0ifSwicHVibGljIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiT0Y4V1VUb0kxcWI5bWNsNEtCbUZ4OUw2czRkZHpOSzBZd2hZN3gvY09UQT0ifX0sInBhaXJpbmdFcGhlbWVyYWxLZXlQYWlyIjp7InByaXZhdGUiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJXS0pDQ1A1V09pR3dsMmMwbVlLbjR0RGZtK25XMjNPSkRIWW1KVUpqcUVRPSJ9LCJwdWJsaWMiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJJY3pleVlkeCsrdmJRWWQvemFjWUU3ZmFUUlh3RWRuaEhkUXBlQWk1VUU4PSJ9fSwic2lnbmVkSWRlbnRpdHlLZXkiOnsicHJpdmF0ZSI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6IktGemp3YTVkYmN0Z0xPaG1mTXlYZ1ZQeTR1dDBhMTQxVktTSFNJTndSa2s9In0sInB1YmxpYyI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6Im9aSGw2dnpRckZnby9mSUNYQWxlQkNyZ3ZxOU1oQjd0Y05tL2E3bjdrMkk9In19LCJzaWduZWRQcmVLZXkiOnsia2V5UGFpciI6eyJwcml2YXRlIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoid0pTYnlvc0RITVhFRHRDM3RaV2E4RzdtcnZHMXNMUnZmQUlSR1p1USszST0ifSwicHVibGljIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoidy82a1AxdzRPYnRndGs5bmV5U3ROZ2VSNmM4TUwwZDQyMVNldm5vR1FuQT0ifX0sInNpZ25hdHVyZSI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6Im1CZnFKcWFkQTNvZllTVy84Y0ttbG9BWFlzYWczUFc5YU1YQUR4UXJSUVJyNld3SjVxbW8wVVZ6QXhDWnpGMTJWT2s2RTJpdXhOcC85Qlg2Unl4c0RRPT0ifSwia2V5SWQiOjF9LCJyZWdpc3RyYXRpb25JZCI6ODYsImFkdlNlY3JldEtleSI6IkJBV2c0R3ZvbjFsRmlKbDROdmxmSTR4WTEwVmh1ZHprY0paUnpjQ3NpWm89IiwicHJvY2Vzc2VkSGlzdG9yeU1lc3NhZ2VzIjpbXSwibmV4dFByZUtleUlkIjozMSwiZmlyc3RVbnVwbG9hZGVkUHJlS2V5SWQiOjMxLCJhY2NvdW50U3luY0NvdW50ZXIiOjAsImFjY291bnRTZXR0aW5ncyI6eyJ1bmFyY2hpdmVDaGF0cyI6ZmFsc2V9LCJkZXZpY2VJZCI6IlpLS0txeHBNUWRDQkJ3VjMzRDhWcHciLCJwaG9uZUlkIjoiZDIxYzMyMjYtMjM4OC00MDBjLThlM2EtNTEyZGU0NTdkMjI0IiwiaWRlbnRpdHlJZCI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6IlRxYzJ5UzNQeGlyWlQrRUFuYWxQQm56TkcyND0ifSwicmVnaXN0ZXJlZCI6dHJ1ZSwiYmFja3VwVG9rZW4iOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJ2N3dsZ1dZbUV2b1ZKeEdUc0ludk1ybit4K1U9In0sInJlZ2lzdHJhdGlvbiI6e30sInBhaXJpbmdDb2RlIjoiRDdXUldXUjUiLCJtZSI6eyJpZCI6IjI1NDc5OTUwODcwMDoyNUBzLndoYXRzYXBwLm5ldCIsIm5hbWUiOiJVbmtub3duIn0sImFjY291bnQiOnsiZGV0YWlscyI6IkNKWHRxaXdRaXRtRHZRWVlBU0FBS0FBPSIsImFjY291bnRTaWduYXR1cmVLZXkiOiJyOVQrV2hacEZzYnJpdGhFSnBzZTl4ODJyTEZCbTBWcGpMcUNaUWhjQmlVPSIsImFjY291bnRTaWduYXR1cmUiOiJJYU5xQkJXalVyZ09HcXg5cmpCR1dNUzFZS2h5ZWtiVTI4Ync2eTFDNnJvUS94djJNd2xBUE4zVFdPVkVXMEJlY3ZJWk9SVk45MVJpZXUyN2V0Ui9CUT09IiwiZGV2aWNlU2lnbmF0dXJlIjoiempsSFh5K2RnNit5YmZFSTJ3cVkwZEYrSHNGaXhoNGNTUlN0NmZNbTV6bktKcnplcUY5ZmhjcjE0b3JVaTFJOTh0UUNaeDJyRXJ3b2paVHJPRTBMRFE9PSJ9LCJzaWduYWxJZGVudGl0aWVzIjpbeyJpZGVudGlmaWVyIjp7Im5hbWUiOiIyNTQ3OTk1MDg3MDA6MjVAcy53aGF0c2FwcC5uZXQiLCJkZXZpY2VJZCI6MH0sImlkZW50aWZpZXJLZXkiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJCYS9VL2xvV2FSYkc2NHJZUkNhYkh2Y2ZOcXl4UVp0RmFZeTZnbVVJWEFZbCJ9fV0sInBsYXRmb3JtIjoic21iYSIsImxhc3RBY2NvdW50U3luY1RpbWVzdGFtcCI6MTczODU5OTU3NH0=
module.exports = authenticationn;
